# JVM
## 基本概念
JVM JVM是运行Java代码的假想计算机，包括一套字节码指令集、一组寄存器、一个栈、一个垃圾回收、堆和一个存储方法域。
![](https://box.kancloud.cn/d203234ab37238de263d644cc96496b3_917x1130.png)

![](https://box.kancloud.cn/f655821c97d641e823aaa994a6d0f0be_626x401.png)

## Java虚拟机具体是怎样运行java字节码的？
从虚拟机的视角来看，执行java代码首先需要将它编译而成的class文件加载到java虚拟机中。加载后的java会被存放在方法区中。实际运行时，虚拟机会执行方法
区的代码
![](https://box.kancloud.cn/ef40cd16bbcb6d05674cc4263521605b_1916x1074.png)

在运行过程中，每当调用进入一个java方法，java虚拟机会在当前线程的java方法栈中生成一个栈帧，用以存放局部变量及字节码的操作数，这个栈帧的大小是提前
算好的，而且java虚拟机不要求栈帧在内存空间里连续分布。

在hotspot里面，上述翻译过程有两种形式：第一种是解释执行，即逐条将字节码翻译成机器码并执行；第二种是即时编译（JIT），即将一个方法包含的所有字节码
编译成机器码后再执行。

![](https://box.kancloud.cn/d709e0d6500d05faa081c7d1fbe27a12_1918x1076.png)

前者的优势在于无需等待编译，而后者的优势在于实际运行速度更快。HotSpot默认采用混合模式，综合了解释执行和即时编译两者的优点。他会先解释执行字节码，
而后将其中反复执行的热点代码以方法为单位进行即时编译。

## Java虚拟机的运行效率如何？
即时编译是建立在程序符合二八定律的假设上，也就是百分之二十的代码占据了百分之八十的计算资源
